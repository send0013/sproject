<html>
<head>
	<title>sproject 0.1</title>
</head>
<link rel="stylesheet" type="text/css" href="css/table.css">
<link rel="stylesheet" type="text/css" href="css/accordian.css">

<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<body>

	<script src="js/tableFunctions.js"></script>
	<script src="js/randomStudent.js"></script>




	<div id="accordian">
		<ul>
			<li>
				<h3>Grade view</h3>
				<ul>
					<p>Course and Grade</p>
					<div id="grade"></div>
					<!-- <li id="grade"><a href="#">Grades</a></li> -->
					<!-- <li><a href="#">Graphs</a></li> -->
					<!-- <li><a href="#">Setting</a></li> -->
				</ul>
				<ul>
					<p>Next semester course</p>
					<div id="nextGrade"></div>
				</ul>
			</li>
		</ul>
	</div>
	<div id="table">
		<table id="myTable" >
		  <tbody>
		  </tbody>
		</table>
	</div>
	<script>

	$(document).ready(function(){

		"use strict";
		// random student
		var studentList = [];
		var rStudent = getRandomStudent();

		var numStudents = 10;
		writeColumns(rStudent);
		// add 10 random students to table	
		for(var i = 0; i < numStudents; i++){
			rStudent = getRandomStudent();
			studentList.push(rStudent);
			writeStudenToRow(rStudent);
		}

		$("#myTable .Name").click(function(e) {  
	        // e.preventDefault();
	        $(this).css({"color":"green"});
	        // var name = $(this).find(".Name").val();
	        var name = $(this).text();
	        // console.log(name);
	        var student = findStudent(name);
	        showStudentGrades(student);
	        showNextSemesterGrades(student);
			// e.stopPropagation();
		});

		function showStudentGrades(student){
			var html = "<ul>";
			for(var course in student.courseGrades) {
				html += "<li>"+ course +" "+student.Level +" "+ student.courseGrades[course] + "</li>";
			};
			html += "</ul>";
			$("#accordian #grade").html(html);
		}

		function showNextSemesterGrades(student){
			var html = "<ul>";
			for(var course in student.courseGrades) {
				var level = student.Level;
				var grade = student.courseGrades[course];
				//|| grade !== "F -"|| grade !== "F +"
				if(grade !== "F" ){
					// console.log(course , grade);
					level +=1;
				}
				html += "<li>"+ course + " "+level +"</li>";
			};
			html += "</ul>";
			$("#accordian #nextGrade").html(html);
		}

		function findStudent(str){
			// find student by name
			for(var i in studentList){
				if(str === studentList[i].Name){
					// console.log(str + " " + studentList[i].Name);
					return studentList[i];
				}
			}
		}


	});
	</script>
</body>

</html>